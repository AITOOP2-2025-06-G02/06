## 1. データの作成 (インスタンス化のタイミング)

データは、`report_model`クラスの**インスタンスが作成される時（`__init__`メソッド実行時）**に作成・初期化されます。


### 方法 (既存データのロード)

* `__init__`メソッドが実行されると、まずカレントディレクトリにある`status.json`ファイルの存在を確認します。
* ファイルが存在する場合、`json.load(f)`を使ってファイルの内容を読み込み、`self.status`変数に辞書としてロード（復元）します。

### 方法 (新規作成・初期化)

* `status.json`ファイルが存在しない場合は、エラーメッセージを表示してプログラムが終了します (※コード上`exit()`が呼ばれています)。
* もし`status.json`が空のファイルなどで、ロードはされたが`"basic_info"`や`"history"`というキーが存在しない場合、以下のように初期化されます。
    * `self.status["basic_info"]`：空の辞書 `{}` として作成されます。
    * `self.status["history"]`：空の辞書 `{}` として作成された後、`get_template_...()` メソッド群（`get_template_my_info`など）から取得した初期テンプレート文字列が各キー（`"MY_INFO"`, `"APP_SPEC_DESCRIBE"`など）の値として設定されます。

---

## 2. データの更新 (外部からのメソッド呼び出し時)

データは、GUIなど外部のプログラムから**`set_text_by_key`メソッドが呼び出された時**に更新されます。

### 方法

* `set_text_by_key(key_name, value)`が呼び出されます。
* `key_name`（`"CLASS_NO"`や`"MY_INFO"`など）が、クラス定義の`KEY_LIST`と照合されます。
* `key_name`に対応する`self.status`辞書内の特定の場所（例：`self.status['history']['MY_WEEKLY_REPORT']`）の値が、引数で渡された`value`（文字列）に置き換えられます。
* `"CLASS_NO"`の場合は、`value`が`int()`で整数に変換されてから格納されます。

---

## 3. データの永続化 (外部からのメソッド呼び出し時)

データは、外部のプログラムから**`save_file`メソッドが呼び出された時**に永続化（ファイルに保存）されます。

### 方法

* `save_file(file_text, file_name)`が呼び出されます。
* （まず、引数で渡されたレポート本文`file_text`が`.md`ファイルとして保存されます。）
* 次に、その時点での`self.status`辞書全体が、`json.dump()`を使って`status.json`というファイル名でカレントディレクトリに書き出されます。
* この際、`indent=4`（整形）と`ensure_ascii=False`（日本語をそのまま保存）のオプションが指定されています。